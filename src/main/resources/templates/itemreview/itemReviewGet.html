<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">

<head th:replace="frame/header :: head">
    <title>Zay Shop - Product Listing Page</title>
</head>

<script src="/js/item/itemRatingsGet.js"></script>

<body>
<!--header-->
<header th:replace="frame/header :: header"></header>

<style>
    .category-box {
        border: 1px solid #ccc;
        padding: 10px;
        margin-bottom: 10px;
    }

    .category-label {
        font-weight: bold;
    }

    .item-box {
border: 1px solid #ccc;
padding: 10px;
margin-bottom: 10px;
}

.item-info {
/* Optional: Add additional styles for item information */
}

.category-label {
font-weight: bold;
}


     #reviewContent img {
       display: block; /* 이미지가 한 줄에 나타나도록 설정 */
        margin: auto; /* 가운데 정렬 */
        max-width: 100%; /* 최대 너비 설정 */
        height: auto; /* 높이 자동으로 조정 */
        margin-bottom: 10px; /* 이미지 아래 여백 추가 */
   }

</style>


<!-- Start Content -->
<div class="container py-5">
    아이템 리뷰
</div>
<!-- End Content -->


<!-- jQuery -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>


<!-- JS 파일 포함 -->
<script src="/js/jquery-1.11.0.min.js"></script>
<script src="/js/summernote-lite.js"></script>
<script src="/js/summernote-ko-KR.js"></script>
<script src="/js/item/itemReview.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.18/summernote.min.js"></script>


<!-- Start Contact -->
<div class="container py-5">
    <div class="row py-5">
        <form class="col-md-9 m-auto" method="post">
            <!-- 폼 요소들 -->
            <div class="row">


                <div th:if="${not #lists.isEmpty(itemReviews)}">
                    <br><br><br>
                    <h3>리뷰 목록</h3>
                    <br>
                    <div th:each="itemReview : ${itemReviews}" class="item-box">
                        <div class="item-info" style="text-align: right;">
                            <div>
                                <span style="font-weight: bold;">작성일 : </span>
                                <span id="itemReviewCreateDate"
                                      th:text="${#temporals.format(itemReview.itemReviewCreateDate, 'yyyy-MM-dd')}"></span>
                            </div>
                        </div>


                        <div class="item-info">
                            <div>
                                <span class="category-label">제목&nbsp;&nbsp;:&nbsp;&nbsp;</span>
                                <span th:text="${itemReview.itemReviewName}"></span>
                            </div>

                            <!-- 별점 및 평점 표시 -->
                            <div class="d-flex justify-content-left mb-1 align-items-left">
                                <span class="category-label">별점&nbsp;&nbsp;:&nbsp;&nbsp;</span>
                                <ul class="list-unstyled d-flex mb-0" id="starRating"
                                    th:attr="data-rating=${itemReview.itemScore}">
                                    <!-- 별 아이콘은 JavaScript로 생성됩니다 -->
                                </ul>

                            </div>


                            <div>
                                <span class="category-label">리뷰 내용&nbsp;&nbsp;:&nbsp;&nbsp;</span>
                                <div style="text-align: left;">
                                    <!-- 썸머노트에서 입력한 리뷰 내용 -->
                                    <div id="reviewContent" th:utext="${itemReview.itemReviewContent}">
                                        <!-- 썸머노트에서 삽입된 이미지의 스타일 -->
                                    </div>
                                </div>
                            </div>


                            <input type="hidden" id="itemId" th:value="${itemReview.itemId}">
                            <!-- 수정 및 삭제 버튼 -->
                            <div class="container">
                                <div class="row justify-content-end">
                                    <div class="col-auto">
                                        <a th:href="@{/ypjs/itemReview/update/{itemReviewId}(itemReviewId=${itemReview.itemReviewId})}"
                                           class="btn btn-warning">수정하기</a>
                                    </div>
                                    <div class="col-auto">

                                        <button type="button"
                                                class="btn btn-danger btn-sm btn-delete-itemReview"
                                                th:data-itemReviewId="${itemReview.itemReviewId}"
                                                style="padding: 2px 10px; font-size: 16px; width: 90px; height: 40px;">
                                            삭제하기
                                        </button>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 페이지네이션 시작 -->
                <nav th:unless="${#lists.isEmpty(itemReviews)}" class="mt-4">
                    <ul class="pagination justify-content-center">
                        <li class="page-item" th:classappend="${page == 0} ? 'disabled'">
                            <a class="page-link"
                               th:href="@{/ypjs/itemReview/get/{itemId}(itemId=${itemReviews[0].itemId}, page=${page - 1}, size=${size})}">이전</a>
                        </li>
                        <li class="page-item" th:each="i : ${#numbers.sequence(0, totalPages - 1)}"
                            th:classappend="${page == i} ? 'active'">
                            <a class="page-link"
                               th:href="@{/ypjs/itemReview/get/{itemId}(itemId=${itemReviews[0].itemId}, page=${i}, size=${size})}"
                               th:text="${i + 1}"></a>
                        </li>
                        <li class="page-item" th:classappend="${page == totalPages - 1} ? 'disabled'">
                            <a class="page-link"
                               th:href="@{/ypjs/itemReview/get/{itemId}(itemId=${itemReviews[0].itemId}, page=${page + 1}, size=${size})}">다음</a>
                        </li>
                    </ul>
                </nav>
                <!--페이지네이션 끝-->


                <!-- End Contact -->


            </div>
        </form>
    </div>
</div>


<footer th:replace="frame/footer :: footer"></footer>

</body>

</html>
